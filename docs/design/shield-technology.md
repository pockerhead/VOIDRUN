# Shield Technology: Kinetic Threshold Barriers

**Статус:** Дизайн-документ
**Версия:** 1.0
**Дата:** 2025-01-13

---

## Обзор

Персональные защитные щиты — ключевая технология, определяющая тактику боя в мире VOIDRUN. Щиты создают уникальный баланс между дальним и ближним боем, где ни одна тактика не доминирует абсолютно.

**Ключевой принцип:** Щит блокирует быстрые объекты, но пропускает медленные атаки.

---

## Физика работы

### Kinetic Threshold Principle

Щит — это энергетическое поле, которое реагирует на **скорость изменения импульса** (dp/dt) проходящего через него объекта.

**Базовая механика:**
```
Высокая скорость (v > 5 м/с)  → полное отражение (100% блок)
Средняя скорость (2-5 м/с)    → частичное поглощение (20-90% блок)
Низкая скорость (v < 2 м/с)   → проходит насквозь (0% блок)
```

**Как это работает:**
- Поле постоянно сканирует объекты, приближающиеся к носителю
- При резком изменении импульса (быстрая атака) → поле мгновенно создаёт противодействующую силу
- При медленном изменении импульса → поле не успевает "активироваться" достаточно сильно
- Результат: пуля отражается, но медленный удар мечом проходит насквозь

**Аналогия:** Неньютоновская жидкость — медленно рука проходит, быстрый удар отражается.

### Энергетическая модель

**Каждый заблокированный удар расходует энергию щита:**
```
Энергия блока = (скорость атаки × урон) / эффективность щита
```

**Примеры:**
- Пуля (800 м/с, 20 урона) → расход 40 энергии
- Плазменный болт (200 м/с, 50 урона) → расход 100 энергии
- Ракета (100 м/с, 300 урона) → расход 600+ энергии (может пробить щит)

**Когда энергия щита = 0:**
- Щит отключается
- Нужна перезарядка (зависит от модели)
- Носитель уязвим для всех атак

---

## Технологическая история

### Открытие (150 лет назад)

**Случайное открытие:**
- Эксперименты корпорации Industries с гравитационными двигателями нового поколения
- Обнаружен побочный эффект — "поле гашения импульса" (momentum damping field)
- Связано с квантовыми свойствами нового типа сверхпроводников

**Первые прототипы:**
- Стационарные установки размером с дом
- Энергопотребление = мощность небольшого города
- Использование: защита критической инфраструктуры (электростанции, военные базы)

### Миниатюризация (100 лет назад)

**Технологический прорыв:**
- Изобретение **Quantum Flux Capacitors** — квантовых суперконденсаторов
- Позволили снизить размер генератора с дома до портативного устройства (размер с пояс)
- Breakthrough в материаловедении: синтетические сверхпроводники, стабильные при комнатной температуре

**Первые персональные щиты:**
- Вес: 8-12 кг
- Время работы: 1-2 часа
- Стоимость: как дом (доступно только военным и элите)

### Современность (последние 50 лет)

**Массовое распространение:**
- Оптимизация производства → снижение стоимости
- Вес современных моделей: 5-8 кг
- Время работы: 2-8 часов (зависит от модели)
- Стоимость: от цены автомобиля до цены танка

**Классы щитов:**
1. **Military-grade** — передовые военные модели
2. **Commercial** — стандартные наёмнические/торговые модели
3. **Civilian** — базовые гражданские модели
4. **Legacy** — устаревшие модели (чёрный рынок, бедные колонии)

---

## Характеристики щитов

### Military-Grade Shields

**Примеры:** "Aegis Mk.VII", "Guardian Elite", "Fortress-Pattern"

**Характеристики:**
- Ёмкость: 1000-1500 единиц энергии
- Регенерация: автоматическая, 50 ед/сек (вне боя)
- Адаптивный порог: может настраивать порог скорости в реальном времени
- Время работы: 6-8 часов активного использования
- Вес: 6-7 кг
- Стоимость: 500,000-1,000,000 кредитов (как танк)

**Особенности:**
- Быстрая регенерация после перегрузки (10 сек)
- Индикатор состояния на HUD
- Интеграция с боевой бронёй

**Кто использует:** Корпоративные спецназовцы, элитные наёмники, военные офицеры

### Commercial Shields

**Примеры:** "Defender Standard", "MercGuard Pro", "Nomad Shield"

**Характеристики:**
- Ёмкость: 500-700 единиц энергии
- Регенерация: базовая, 20 ед/сек (вне боя)
- Фиксированный порог: v > 5 м/с
- Время работы: 3-4 часа активного использования
- Вес: 7-8 кг
- Стоимость: 50,000-150,000 кредитов (как дорогой автомобиль)

**Особенности:**
- Простота ремонта (стандартизированные компоненты)
- Доступность запчастей
- Надёжность

**Кто использует:** Наёмники, торговцы, капитаны независимых кораблей, обеспеченные колонисты

### Civilian Shields

**Примеры:** "SafeWalk Basic", "Citizen Guard", "Budget Barrier"

**Характеристики:**
- Ёмкость: 300-400 единиц энергии
- Регенерация: нет (нужна полная перезарядка)
- Фиксированный порог: v > 5 м/с
- Время работы: 2-3 часа
- Вес: 8-9 кг
- Стоимость: 10,000-30,000 кредитов (доступно среднему классу)

**Особенности:**
- Ограниченная защита (предназначен для самообороны, не боя)
- Долгая перезарядка (30+ минут)
- Низкая устойчивость к перегрузке

**Кто использует:** Гражданские на опасных станциях, мелкие торговцы, курьеры

### Legacy Shields

**Примеры:** Устаревшие модели 20-50 летней давности

**Характеристики:**
- Ёмкость: 200-300 единиц энергии
- Регенерация: часто неисправна
- Нестабильный порог: может глючить
- Время работы: 1-2 часа (если повезёт)
- Вес: 10-15 кг (старые технологии)
- Стоимость: 2,000-5,000 кредитов (чёрный рынок)

**Особенности:**
- Ненадёжность (может отключиться в бою)
- Сложность ремонта (старые запчасти)
- Видимые дефекты (мерцание, искрение)

**Кто использует:** Бедные колонии, пираты низшего ранга, отчаявшиеся

---

## Gameplay Implications

### Тактика дальнего боя

**Преимущества:**
- Безопасная дистанция
- Множественные цели
- Подавление противника

**Стратегии против щитов:**

**1. Атрициальный урон (Attrition)**
```
Стреляй в щит → разряжай его энергию → пробой
```
- Эффективно против слабых щитов (civilian, legacy)
- Требует боеприпасов и времени
- Противник может отступить и перезарядиться

**2. Focus Fire**
```
2-3 стрелка одновременно → перегрузка щита → пробой
```
- Быстрее, чем атрициальный урон
- Требует координации
- Эффективно против commercial shields

**3. Heavy Weapons**
```
Plasma cannons, railguns, rockets → огромный урон за выстрел
```
- Пробивают military shields за 2-3 выстрела
- Дорогие боеприпасы
- Медленная скорострельность

### Тактика ближнего боя

**Преимущества:**
- Игнорирует щит (медленные удары проходят)
- Не требует боеприпасов
- Контроль противника (захваты, толчки)

**Недостатки:**
- Нужно подойти близко → уязвим для контратаки
- Высокие затраты выносливости (stamina)
- Рискованно против нескольких противников

**Стратегии:**

**1. Direct Rush**
```
Быстро закрыть дистанцию → ближний бой
```
- Эффективно если твой щит сильнее вражеского (танкуешь огонь на подходе)
- Рискованно против multiple targets
- Требует хорошей мобильности

**2. Флангование**
```
Обход сбоку/сзади → ближняя атака
```
- Менее рискованно
- Требует cover и тактики
- Эффективно в команде (один отвлекает, другой флангует)

**3. Stealth Approach**
```
Незаметно подкрасться → assassination
```
- Идеально против одиночных целей
- Требует навыков скрытности
- Один удар = убийство (нет щита при неожиданности)

### Hybrid Тактика

**Наиболее эффективный подход:**
```
Ranged → разрядить щит противника (50-70%)
Switch to Melee → finishing move
```

**Преимущества:**
- Безопасное начало (дальняя дистанция)
- Быстрое завершение (ближний бой)
- Экономия боеприпасов

**Требования:**
- Оружие обоих типов
- Навыки в обоих стилях боя
- Хорошее тайминг-чувство (когда переключаться)

---

## Ограничения технологии

### Почему не все носят щиты 24/7

**1. Энергопотребление**
- Ограниченное время работы (2-8 часов)
- Нужна перезарядка (от розетки, генератора корабля)
- Нельзя использовать бесконечно

**2. Вес и неудобство**
- Генератор щита = 5-15 кг на поясе/спине
- Мешает в повседневной жизни
- Ограничивает мобильность (особенно legacy модели)

**3. Стоимость владения**
- Покупка: от 10,000 до 1,000,000 кредитов
- Ремонт: замена Quantum Flux Capacitors стоит 10-30% от цены щита
- Обслуживание: регулярная калибровка

**4. Заметность**
- Активный щит создаёт характерное мерцание в атмосфере
- Противник видит тебя издалека
- На некоторых станциях — явный признак того, что ты "при делах"

**5. Юридические ограничения**
- На многих гражданских станциях запрещено ходить с активным щитом (как с оружием)
- Нарушение = штраф или арест
- В мирных зонах щит = провокация

**6. Техническая уязвимость**
- EMP атаки отключают щит на 10-30 секунд
- Редкие хакеры могут перегрузить чужой щит дистанционно
- В воде щиты работают плохо (непрерывный поток низкоскоростных частиц)

### Почему melee всё ещё опасен

**Щит НЕ защищает от:**
- Удушения, захватов, бросков
- Медленных колющих/режущих ударов
- Контактного электрошока (arc weapons)

**Skilled melee fighter > неопытный стрелок:**
- Мастер ближнего боя контролирует дистанцию
- Может заставить противника паниковать
- Одна ошибка стрелка = смерть

---

## Взаимодействие с окружением

### В космосе (вакуум)
- **Идеальные условия:** Щиты работают на 100% эффективности
- Нет атмосферного сопротивления
- Нет мерцания (не видно глазом)

### В атмосфере (планеты, станции)
- **Мерцание:** Щит создаёт видимое искажение воздуха при движении
- Эффективность: 90-95% (небольшая потеря на взаимодействие с воздухом)
- Заметность: противник видит мерцание с 50-100 метров

### Под водой
- **Критическое снижение эффективности:** 50-70% блок вместо 100%
- Причина: вода = непрерывный поток низкоскоростных частиц
- Щит постоянно разряжается, пытаясь блокировать воду

### В экстремальных условиях
- **Высокая радиация:** Снижает эффективность на 10-20%
- **Сильное магнитное поле:** Может вызвать нестабильность щита
- **Гравитационные аномалии:** Щит может отключиться

---

## Специализированное оружие

### Arc Weapons (Дуговое оружие)

**Принцип:** Электрический разряд "течёт" по поверхности щита к точкам заземления (носитель).

**Эффект:**
- Игнорирует 50-70% защиты щита
- Наносит урон напрямую носителю (электрошок)
- Эффективно против тяжело бронированных целей с щитами

**Недостатки:**
- Короткая дистанция (5-10 метров)
- Медленная перезарядка
- Дорогие боеприпасы/энергоячейки

**Примеры:** Arc Pistol, Lightning Staff, Tesla Coil Rifle

### EMP Devices

**Принцип:** Электромагнитный импульс перегружает схемы щита.

**Эффект:**
- Отключает щит на 10-30 секунд
- Не наносит урон носителю
- Area of effect (может вырубить несколько щитов)

**Недостатки:**
- Одноразовые гранаты или долгая перезарядка устройства
- Дорого
- Легко заметить (яркая вспышка)

**Примеры:** EMP Grenade, Pulse Emitter, Disruptor Mine

---

## Культурные различия

### Корпоративные армии

**Отношение:** Щиты обязательны, стандартизированы.

**Философия:**
- "Технология превыше мастерства"
- Массовое производство → доступность для всех солдат
- Стандартизированная тактика (drill, formation)

**Типичное снаряжение:**
- Commercial или Military shields (зависит от подразделения)
- Стандартизированное оружие
- Минимальный melee фокус

### Военные культы (пример: "Void Reavers")

**Отношение:** Презирают щиты, полагаются на броню + мастерство.

**Философия:**
- "Щит — костыль для слабых"
- Мастерство ближнего боя превыше технологии
- Честь в прямом столкновении

**Типичное снаряжение:**
- Тяжёлая броня (вместо щита)
- Melee оружие высокого качества
- Минимум ranged weapons (только для подавления)

### Пиратские кланы

**Отношение:** Pragmatic mix — используют что украдут/купят.

**Философия:**
- "Работает = хорошо"
- Адаптируются под добычу
- Нет единого стандарта

**Типичное снаряжение:**
- Legacy или краденые Commercial shields
- Разношёрстное оружие
- Improvised тактика

### Торговые гильдии

**Отношение:** Щиты как страховка, не как основное средство.

**Философия:**
- "Лучше избежать боя, чем выиграть его"
- Инвестируют в защиту, но не в нападение
- Нанимают охрану вместо личного мастерства

**Типичное снаряжение:**
- Commercial shields (хорошего качества)
- Лёгкое defensive оружие
- Focus на escape и evasion

---

## Implementation roadmap

### Phase 1: Базовая механика (Текущий этап)

**Уже реализовано:**
```rust
// Компонент щита
struct Shield {
    max_energy: f32,
    current_energy: f32,
    velocity_threshold: f32,  // 5.0 м/с
}

// Ranged урон → разряд щита
fn apply_damage_with_shield(shield: &mut Shield, damage: f32, velocity: f32) {
    if velocity > shield.velocity_threshold {
        shield.current_energy -= damage;
        if shield.current_energy <= 0.0 {
            // Щит пробит
        }
    } else {
        // Урон проходит насквозь (melee)
    }
}
```

**TODO:**
- [ ] Melee урон игнорирует щит полностью
- [ ] Визуализация щита в Godot (мерцание при попадании)
- [ ] UI индикатор энергии щита

### Phase 2: Продвинутые механики

**Плановые фичи:**
- [ ] Разные модели щитов (Military, Commercial, Civilian, Legacy)
- [ ] Регенерация энергии щита (вне боя)
- [ ] Адаптивные пороги (Military-grade)
- [ ] Перегрузка щита (overload) → temporary disable

### Phase 3: Специализация

**Продвинутые фичи:**
- [ ] Arc weapons (обходят щит частично)
- [ ] EMP devices (временное отключение)
- [ ] Щит + окружение взаимодействия (вода, атмосфера)
- [ ] Культурные фракции (разное отношение к щитам)

### Phase 4: Polish

**Финальные штрихи:**
- [ ] VFX щитов (мерцание, перегрузка, отключение)
- [ ] SFX (звуки попаданий, перегрузки)
- [ ] Баланс разных моделей щитов
- [ ] Экономика (стоимость покупки/ремонта)

---

## Ссылки

**Связанные документы:**
- [docs/architecture/combat-system.md](../architecture/combat-system.md) — Общая боевая система
- [docs/design/weapon-types.md](weapon-types.md) — Типы оружия (TODO)
- [docs/design/factions.md](factions.md) — Фракции и их философия (TODO)

**ADRs:**
- ADR-008: Shield Technology Design (этот документ)

---

**Последнее обновление:** 2025-01-13
**Автор:** VOIDRUN Design Team
